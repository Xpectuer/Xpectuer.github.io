---
layout: post
title: "计算机网络体系结构"
tags: network interview
categories: Network
date: 2021-01-29
---



# 计算机网络体系结构

《计算机网络》一书将网络体系结构分为

| 五层结构                  |
| ------------------------- |
| 应用层Application Layer   |
| 运输层Transport Layer     |
| 网络层Network Layer       |
| 数据链路层Data Link Layer |
| 物理层Physical Layer      |

| TCP/IP                      |
| --------------------------- |
| 应用层Application Layer     |
| 传输层Transport Layer       |
| 网际层 Internet Layer       |
| 网络接口层Network Interface |

| OSI参考模型         |
| ------------------- |
| 应用层Application   |
| 表示层Presentation  |
| 会话层Session       |
| 传输层Transport     |
| 网络层Network       |
| 数据链路层Data Link |
| 物理层Physical      |

- Physical, Data Link, Network, Transport, Application

- 应用层：常见协议：

  - FTP(21端口)：文件传输协议
  - SSH(22端口)：远程登陆
  - TELNET(23端口)：远程登录
  - SMTP(25端口)：发送邮件
  - POP3(110端口)：接收邮件
  - HTTP(80端口)：超文本传输协议
  - DNS(53端口)：运行在UDP上，域名解析服务

- 传输层：TCP/UDP

- 网络层：IP、ARP、NAT、RIP...

#### 路由器、交换机位于哪一层？

  路由器**网络层**，根据IP地址进行寻址；

  交换机**数据链路层**，根据MAC地址进行寻址

### IP地址分类

| 类型/作用 | IP组成 （开始位）网络IP-主机IP（总32位） | 范围(x:[0-255]) |
| --------- | ---------------------------------------- | --------------- |
| A         | （0）8 - 24                              | [0-127].x.x.x   |
| B         | （10）16 - 16                            | [128-191].x.x.x |
| C         | （110）24 - 8                            | [192-223].x.x.x |
| D多播     | （1110）多播地址                         | [224-239].x.x.x |
| E保留     | （11110）保留使用                        | [240-247]       |

路由器仅根据网络号net-id来转发分组，

当分组到达目的网络的路由器之后，再按照主机号host-id将分组交付给主机；

同一网络上的所有主机的**网络号相同**。



#### 划分子网

主要思想就是：从主机号位借几位作为子网号subnet-id；

子网掩码：网络号和子网号都为1，主机号为0；

数据报仍然先按照网络号找到目的网络，发送到路由器，路由器按照网络号与子网号找到目的子网：将子网掩码与目标地址逐比特与操作，如果是某个子网的网络地址，则送到子网。



### ARP协议

工作在网络层与数据链路层之间

完成MAC地址与IP地址的映射

ARP协议作用在同一局域网内

- 源主机检查ARP高速缓存，
- 如果没有目的主机MAC-IP映射，发送一个广播包（包含自身MAC-IP映射）
- 收到请求的主机检查自己的IP地址和目的主机的IP是否一致
  - 如果一致保存源主机MAC-IP映射到ARP缓存
  - 发送响应数据包
- 源主机收到后到响应数据包后，添加映射ARP高速缓存
- 如果源主机收不到ARP响应包，表示ARP查询失败



### NAT(Network Address Translation, 网络地址转换)？

用于解决内网中的主机要和因特网上的主机通信。

由NAT路由器将主机的本地IP地址转换为全球IP地址。分为：

- 静态转换（转换得到的全球IP地址固定不变）

- 动态NAT转换

